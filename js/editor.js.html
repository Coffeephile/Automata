<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>~/Automata/Automata/js/editor.js.html</title>
<meta name="Generator" content="Vim/7.2">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
</head>
<body bgcolor="#242424" text="#f6f3e8"><font face="monospace">
<span style="background-color: #000000"><font color="#857b6f">&nbsp;&nbsp;1 </font></span><font color="#cae682"><b>function</b></font>&nbsp;Editor(&nbsp;canvas, dfaview )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;&nbsp;2 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>this</b></font>.canvas = canvas;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;&nbsp;3 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>this</b></font>.dfaview = dfaview;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;&nbsp;4 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>this</b></font>.dfa = dfaview.dfa;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;&nbsp;5 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>this</b></font>.renderer = <font color="#8ac6f2">new</font>&nbsp;Renderer(&nbsp;<font color="#cae682"><b>this</b></font>.canvas, <font color="#cae682"><b>this</b></font>.dfaview );<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;&nbsp;6 </font></span><font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;&nbsp;7 </font></span>Editor.prototype = <font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;&nbsp;8 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;constructor: <font color="#95e454"><i>'Editor'</i></font>,<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;&nbsp;9 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;dragging: <font color="#e5786d"><b>false</b></font>,<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;10 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;maxz: 1,<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;11 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;selectedElement: <font color="#e5786d"><b>false</b></font>,<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;12 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;mainLoop: <font color="#cae682"><b>function</b></font>()&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;13 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>this</b></font>.renderer.render();<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;14 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setTimeout(&nbsp;<font color="#cae682"><b>this</b></font>.mainLoop.bind(&nbsp;<font color="#cae682"><b>this</b></font>&nbsp;), 17&nbsp;);<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;15 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font>,<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;16 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;elementSelected: <font color="#cae682"><b>function</b></font>(&nbsp;element )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;17 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;oldtype = <font color="#cae682"><b>this</b></font>.selectedElement<font color="#cae682"><b>[</b></font>&nbsp;0&nbsp;<font color="#cae682"><b>]</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;18 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;oldid = <font color="#cae682"><b>this</b></font>.selectedElement<font color="#cae682"><b>[</b></font>&nbsp;1&nbsp;<font color="#cae682"><b>]</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;19 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;type = element<font color="#cae682"><b>[</b></font>&nbsp;0&nbsp;<font color="#cae682"><b>]</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;20 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;id = element<font color="#cae682"><b>[</b></font>&nbsp;1&nbsp;<font color="#cae682"><b>]</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;21 </font></span><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;22 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">if</font>&nbsp;(&nbsp;oldtype != type || id != oldid )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;23 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">switch</font>&nbsp;(&nbsp;type )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;24 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">case</font>&nbsp;<font color="#95e454"><i>'state'</i></font>:<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;25 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>this</b></font>.dfaview.states<font color="#cae682"><b>[</b></font>&nbsp;id <font color="#cae682"><b>]</b></font>.importance = <font color="#95e454"><i>'strong'</i></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;26 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">break</font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;27 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">case</font>&nbsp;<font color="#95e454"><i>'transition'</i></font>:<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;28 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>this</b></font>.dfaview.transitions<font color="#cae682"><b>[</b></font>&nbsp;id<font color="#cae682"><b>[</b></font>&nbsp;0&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;<font color="#cae682"><b>][</b></font>&nbsp;id<font color="#cae682"><b>[</b></font>&nbsp;1&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;<font color="#cae682"><b>]</b></font>.importance = <font color="#95e454"><i>'strong'</i></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;29 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">break</font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;30 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;31 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">if</font>&nbsp;(&nbsp;<font color="#cae682"><b>this</b></font>.selectedElement != <font color="#e5786d"><b>false</b></font>&nbsp;)&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;32 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>this</b></font>.elementDeselected();<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;33 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;34 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>this</b></font>.selectedElement = element;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;35 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;36 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font>,<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;37 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;elementDeselected: <font color="#cae682"><b>function</b></font>()&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;38 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;type = <font color="#cae682"><b>this</b></font>.selectedElement<font color="#cae682"><b>[</b></font>&nbsp;0&nbsp;<font color="#cae682"><b>]</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;39 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;id = <font color="#cae682"><b>this</b></font>.selectedElement<font color="#cae682"><b>[</b></font>&nbsp;1&nbsp;<font color="#cae682"><b>]</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;40 </font></span><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;41 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">switch</font>&nbsp;(&nbsp;type )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;42 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">case</font>&nbsp;<font color="#95e454"><i>'state'</i></font>:<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;43 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>this</b></font>.dfaview.states<font color="#cae682"><b>[</b></font>&nbsp;id <font color="#cae682"><b>]</b></font>.importance = <font color="#95e454"><i>'normal'</i></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;44 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">break</font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;45 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">case</font>&nbsp;<font color="#95e454"><i>'transition'</i></font>:<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;46 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>this</b></font>.dfaview.transitions<font color="#cae682"><b>[</b></font>&nbsp;id<font color="#cae682"><b>[</b></font>&nbsp;0&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;<font color="#cae682"><b>][</b></font>&nbsp;id<font color="#cae682"><b>[</b></font>&nbsp;1&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;<font color="#cae682"><b>]</b></font>.importance = <font color="#95e454"><i>'normal'</i></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;47 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">break</font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;48 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;49 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>this</b></font>.selectedElement = <font color="#e5786d"><b>false</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;50 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font>,<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;51 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;isStateSelected: <font color="#cae682"><b>function</b></font>(&nbsp;state )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;52 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;ret =<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;53 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>this</b></font>.selectedElement != <font color="#e5786d"><b>false</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;54 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;&amp; <font color="#cae682"><b>this</b></font>.selectedElement<font color="#cae682"><b>[</b></font>&nbsp;0&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;== <font color="#95e454"><i>'state'</i></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;55 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;&amp; <font color="#cae682"><b>this</b></font>.selectedElement<font color="#cae682"><b>[</b></font>&nbsp;1&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;== state;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;56 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">return</font>&nbsp;ret;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;57 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font>,<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;58 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;isTransitionSelected: <font color="#cae682"><b>function</b></font>(&nbsp;transition )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;59 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;ret =<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;60 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>this</b></font>.selectedElement != <font color="#e5786d"><b>false</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;61 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;&amp; <font color="#cae682"><b>this</b></font>.selectedElement<font color="#cae682"><b>[</b></font>&nbsp;0&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;== <font color="#95e454"><i>'transition'</i></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;62 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;&amp; same(&nbsp;<font color="#cae682"><b>this</b></font>.selectedElement<font color="#cae682"><b>[</b></font>&nbsp;1&nbsp;<font color="#cae682"><b>]</b></font>, transition )<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;63 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">return</font>&nbsp;ret;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;64 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font>,<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;65 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;play: <font color="#cae682"><b>function</b></font>()&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;66 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;dfa = <font color="#cae682"><b>this</b></font>.dfa;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;67 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;renderer = <font color="#cae682"><b>this</b></font>.renderer;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;68 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;canvas = <font color="#cae682"><b>this</b></font>.canvas;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;69 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;<font color="#8ac6f2"><b>self</b></font>&nbsp;= <font color="#cae682"><b>this</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;70 </font></span><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;71 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dfa.on(&nbsp;<font color="#95e454"><i>'statedeleted'</i></font>, <font color="#cae682"><b>function</b></font>(&nbsp;state )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;72 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">if</font>&nbsp;(&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2"><b>self</b></font>.selectedElement<font color="#cae682"><b>[</b></font>&nbsp;0&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;== <font color="#95e454"><i>'state'</i></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;73 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;&amp; <font color="#8ac6f2"><b>self</b></font>.selectedElement<font color="#cae682"><b>[</b></font>&nbsp;1&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;== state )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;74 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2"><b>self</b></font>.selectedElement = <font color="#e5786d"><b>false</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;75 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;76 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font>&nbsp;);<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;77 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.on(&nbsp;<font color="#95e454"><i>'mouseoverstate'</i></font>, <font color="#cae682"><b>function</b></font>(&nbsp;state )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;78 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">if</font>&nbsp;(&nbsp;!<font color="#8ac6f2"><b>self</b></font>.dragging &amp;&amp; !<font color="#8ac6f2"><b>self</b></font>.isStateSelected(&nbsp;state )&nbsp;)&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;79 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dfaview.states<font color="#cae682"><b>[</b></font>&nbsp;state <font color="#cae682"><b>]</b></font>.importance = <font color="#95e454"><i>'emphasis'</i></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;80 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;81 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canvas.style.cursor = <font color="#95e454"><i>'pointer'</i></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;82 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font>&nbsp;);<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;83 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>function</b></font>&nbsp;stateOut(&nbsp;state )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;84 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">if</font>&nbsp;(&nbsp;!<font color="#8ac6f2"><b>self</b></font>.isStateSelected(&nbsp;state )&nbsp;)&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;85 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dfaview.states<font color="#cae682"><b>[</b></font>&nbsp;state <font color="#cae682"><b>]</b></font>.importance = <font color="#95e454"><i>'normal'</i></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;86 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;87 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canvas.style.cursor = <font color="#95e454"><i>'default'</i></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;88 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;89 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.on(&nbsp;<font color="#95e454"><i>'mouseovertransition'</i></font>, <font color="#cae682"><b>function</b></font>(&nbsp;transition )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;90 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">if</font>&nbsp;(&nbsp;!<font color="#8ac6f2"><b>self</b></font>.dragging &amp;&amp; !<font color="#8ac6f2"><b>self</b></font>.isTransitionSelected(&nbsp;transition )&nbsp;)&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;91 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dfaview.transitions<font color="#cae682"><b>[</b></font>&nbsp;transition<font color="#cae682"><b>[</b></font>&nbsp;0&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;<font color="#cae682"><b>][</b></font>&nbsp;transition<font color="#cae682"><b>[</b></font>&nbsp;1&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;<font color="#cae682"><b>]</b></font>.importance = <font color="#95e454"><i>'emphasis'</i></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;92 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;93 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canvas.style.cursor = <font color="#95e454"><i>'pointer'</i></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;94 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font>&nbsp;);<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;95 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>function</b></font>&nbsp;transitionOut(&nbsp;transition )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;96 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">if</font>&nbsp;(&nbsp;!<font color="#8ac6f2"><b>self</b></font>.isTransitionSelected(&nbsp;transition )&nbsp;)&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;97 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dfaview.transitions<font color="#cae682"><b>[</b></font>&nbsp;transition<font color="#cae682"><b>[</b></font>&nbsp;0&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;<font color="#cae682"><b>][</b></font>&nbsp;transition<font color="#cae682"><b>[</b></font>&nbsp;1&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;<font color="#cae682"><b>]</b></font>.importance = <font color="#95e454"><i>'normal'</i></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;98 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">&nbsp;99 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canvas.style.cursor = <font color="#95e454"><i>'default'</i></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">100 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">101 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.on(&nbsp;<font color="#95e454"><i>'mouseouttransition'</i></font>, transitionOut );<br>
<span style="background-color: #000000"><font color="#857b6f">102 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.on(&nbsp;<font color="#95e454"><i>'mouseoutstate'</i></font>, stateOut );<br>
<span style="background-color: #000000"><font color="#857b6f">103 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.on(&nbsp;<font color="#95e454"><i>'mousedownstate'</i></font>, <font color="#cae682"><b>function</b></font>(&nbsp;state, e )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">104 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;client = <font color="#8ac6f2">new</font>&nbsp;Vector(&nbsp;e.clientX, e.clientY );<br>
<span style="background-color: #000000"><font color="#857b6f">105 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;s = dfaview.states<font color="#cae682"><b>[</b></font>&nbsp;state <font color="#cae682"><b>]</b></font>.position;<br>
<span style="background-color: #000000"><font color="#857b6f">106 </font></span><br>
<span style="background-color: #000000"><font color="#857b6f">107 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2"><b>self</b></font>.dragging = <font color="#e5786d"><b>true</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">108 </font></span><br>
<span style="background-color: #000000"><font color="#857b6f">109 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dfaview.states<font color="#cae682"><b>[</b></font>&nbsp;state <font color="#cae682"><b>]</b></font>.zindex = <font color="#8ac6f2"><b>self</b></font>.maxz++;<br>
<span style="background-color: #000000"><font color="#857b6f">110 </font></span><br>
<span style="background-color: #000000"><font color="#857b6f">111 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>function</b></font>&nbsp;move(&nbsp;e )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">112 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;newClient = <font color="#8ac6f2">new</font>&nbsp;Vector(&nbsp;e.clientX, e.clientY );<br>
<span style="background-color: #000000"><font color="#857b6f">113 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;d = newClient.minus(&nbsp;client );<br>
<span style="background-color: #000000"><font color="#857b6f">114 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dfaview.states<font color="#cae682"><b>[</b></font>&nbsp;state <font color="#cae682"><b>]</b></font>.position = s.plus(&nbsp;d );<br>
<span style="background-color: #000000"><font color="#857b6f">115 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">116 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>function</b></font>&nbsp;up(&nbsp;e )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">117 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.removeListener(&nbsp;<font color="#95e454"><i>'mousemove'</i></font>, move );<br>
<span style="background-color: #000000"><font color="#857b6f">118 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.on(&nbsp;<font color="#95e454"><i>'mouseoutstate'</i></font>, stateOut );<br>
<span style="background-color: #000000"><font color="#857b6f">119 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.on(&nbsp;<font color="#95e454"><i>'mouseouttransition'</i></font>, transitionOut );<br>
<span style="background-color: #000000"><font color="#857b6f">120 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2"><b>self</b></font>.dragging = <font color="#e5786d"><b>false</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">121 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canvas.style.cursor = <font color="#95e454"><i>'default'</i></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">122 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">123 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.on(&nbsp;<font color="#95e454"><i>'mousemove'</i></font>, move );<br>
<span style="background-color: #000000"><font color="#857b6f">124 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.once(&nbsp;<font color="#95e454"><i>'mouseup'</i></font>, up );<br>
<span style="background-color: #000000"><font color="#857b6f">125 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.removeListener(&nbsp;<font color="#95e454"><i>'mouseoutstate'</i></font>, stateOut );<br>
<span style="background-color: #000000"><font color="#857b6f">126 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.removeListener(&nbsp;<font color="#95e454"><i>'mouseouttransition'</i></font>, transitionOut );<br>
<span style="background-color: #000000"><font color="#857b6f">127 </font></span><br>
<span style="background-color: #000000"><font color="#857b6f">128 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2"><b>self</b></font>.elementSelected(&nbsp;<font color="#cae682"><b>[</b></font>&nbsp;<font color="#95e454"><i>'state'</i></font>, state <font color="#cae682"><b>]</b></font>&nbsp;);<br>
<span style="background-color: #000000"><font color="#857b6f">129 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font>&nbsp;);<br>
<span style="background-color: #000000"><font color="#857b6f">130 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.on(&nbsp;<font color="#95e454"><i>'mousedowntransition'</i></font>, <font color="#cae682"><b>function</b></font>(&nbsp;transition, e )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">131 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;transitionView = dfaview.transitions<font color="#cae682"><b>[</b></font>&nbsp;transition<font color="#cae682"><b>[</b></font>&nbsp;0&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;<font color="#cae682"><b>][</b></font>&nbsp;transition<font color="#cae682"><b>[</b></font>&nbsp;1&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;<font color="#cae682"><b>]</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">132 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;oldClient = <font color="#8ac6f2">new</font>&nbsp;Vector(&nbsp;e.clientX, e.clientY );<br>
<span style="background-color: #000000"><font color="#857b6f">133 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;from = <font color="#8ac6f2"><b>self</b></font>.dfaview.states<font color="#cae682"><b>[</b></font>&nbsp;transition<font color="#cae682"><b>[</b></font>&nbsp;0&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;<font color="#cae682"><b>]</b></font>.position;<br>
<span style="background-color: #000000"><font color="#857b6f">134 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;to = <font color="#8ac6f2"><b>self</b></font>.dfaview.states<font color="#cae682"><b>[</b></font>&nbsp;<font color="#8ac6f2"><b>self</b></font>.dfaview.dfa.transitions<font color="#cae682"><b>[</b></font>&nbsp;transition<font color="#cae682"><b>[</b></font>&nbsp;0&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;<font color="#cae682"><b>][</b></font>&nbsp;transition<font color="#cae682"><b>[</b></font>&nbsp;1&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;<font color="#cae682"><b>]</b></font>.position;<br>
<span style="background-color: #000000"><font color="#857b6f">135 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;angle = from.minus(&nbsp;to ).theta();<br>
<span style="background-color: #000000"><font color="#857b6f">136 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;s = to.plus(&nbsp;Vector.fromPolar(&nbsp;<font color="#cae682"><b>this</b></font>.STATE_RADIUS, angle )&nbsp;);<br>
<span style="background-color: #000000"><font color="#857b6f">137 </font></span><br>
<span style="background-color: #000000"><font color="#857b6f">138 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2"><b>self</b></font>.dragging = <font color="#e5786d"><b>true</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">139 </font></span><br>
<span style="background-color: #000000"><font color="#857b6f">140 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dfaview.states<font color="#cae682"><b>[</b></font>&nbsp;transition<font color="#cae682"><b>[</b></font>&nbsp;0&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;<font color="#cae682"><b>]</b></font>.zindex = <font color="#8ac6f2"><b>self</b></font>.maxz++;<br>
<span style="background-color: #000000"><font color="#857b6f">141 </font></span><br>
<span style="background-color: #000000"><font color="#857b6f">142 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>function</b></font>&nbsp;move(&nbsp;e )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">143 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;client = <font color="#8ac6f2">new</font>&nbsp;Vector(&nbsp;e.clientX, e.clientY )<br>
<span style="background-color: #000000"><font color="#857b6f">144 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;d = client.minus(&nbsp;oldClient );<br>
<span style="background-color: #000000"><font color="#857b6f">145 </font></span><br>
<span style="background-color: #000000"><font color="#857b6f">146 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transitionView.position = s.plus(&nbsp;d );<br>
<span style="background-color: #000000"><font color="#857b6f">147 </font></span><br>
<span style="background-color: #000000"><font color="#857b6f">148 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;test = renderer.hitTest(&nbsp;client.minus(&nbsp;renderer.offset )&nbsp;);<br>
<span style="background-color: #000000"><font color="#857b6f">149 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">if</font>&nbsp;(&nbsp;test<font color="#cae682"><b>[</b></font>&nbsp;0&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;== <font color="#95e454"><i>'state'</i></font>&nbsp;)&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">150 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transitionView.detached = <font color="#e5786d"><b>false</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">151 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dfaview.dfa.transitions<font color="#cae682"><b>[</b></font>&nbsp;transition<font color="#cae682"><b>[</b></font>&nbsp;0&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;<font color="#cae682"><b>][</b></font>&nbsp;transition<font color="#cae682"><b>[</b></font>&nbsp;1&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;= test<font color="#cae682"><b>[</b></font>&nbsp;1&nbsp;<font color="#cae682"><b>]</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">152 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">153 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">else</font>&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">154 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transitionView.detached = <font color="#e5786d"><b>true</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">155 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">156 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">157 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>function</b></font>&nbsp;up(&nbsp;e )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">158 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.removeListener(&nbsp;<font color="#95e454"><i>'mousemove'</i></font>, move );<br>
<span style="background-color: #000000"><font color="#857b6f">159 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.on(&nbsp;<font color="#95e454"><i>'mouseoutstate'</i></font>, stateOut );<br>
<span style="background-color: #000000"><font color="#857b6f">160 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.on(&nbsp;<font color="#95e454"><i>'mouseouttransition'</i></font>, transitionOut );<br>
<span style="background-color: #000000"><font color="#857b6f">161 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2"><b>self</b></font>.dragging = <font color="#e5786d"><b>false</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">162 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transitionView.detached = <font color="#e5786d"><b>false</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">163 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canvas.style.cursor = <font color="#95e454"><i>'default'</i></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">164 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">165 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.on(&nbsp;<font color="#95e454"><i>'mousemove'</i></font>, move );<br>
<span style="background-color: #000000"><font color="#857b6f">166 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.once(&nbsp;<font color="#95e454"><i>'mouseup'</i></font>, up );<br>
<span style="background-color: #000000"><font color="#857b6f">167 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.removeListener(&nbsp;<font color="#95e454"><i>'mouseoutstate'</i></font>, stateOut );<br>
<span style="background-color: #000000"><font color="#857b6f">168 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.removeListener(&nbsp;<font color="#95e454"><i>'mouseouttransition'</i></font>, transitionOut );<br>
<span style="background-color: #000000"><font color="#857b6f">169 </font></span><br>
<span style="background-color: #000000"><font color="#857b6f">170 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2"><b>self</b></font>.elementSelected(&nbsp;<font color="#cae682"><b>[</b></font>&nbsp;<font color="#95e454"><i>'transition'</i></font>, transition <font color="#cae682"><b>]</b></font>&nbsp;);<br>
<span style="background-color: #000000"><font color="#857b6f">171 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font>&nbsp;);<br>
<span style="background-color: #000000"><font color="#857b6f">172 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.on(&nbsp;<font color="#95e454"><i>'mousedownvoid'</i></font>, <font color="#cae682"><b>function</b></font>(&nbsp;e )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">173 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2"><b>self</b></font>.elementDeselected();<br>
<span style="background-color: #000000"><font color="#857b6f">174 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font>&nbsp;);<br>
<span style="background-color: #000000"><font color="#857b6f">175 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer.on(&nbsp;<font color="#95e454"><i>'dblclick'</i></font>, <font color="#cae682"><b>function</b></font>(&nbsp;e )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">176 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>var</b></font>&nbsp;newState = dfaview.dfa.numStates + 1;<br>
<span style="background-color: #000000"><font color="#857b6f">177 </font></span><br>
<span style="background-color: #000000"><font color="#857b6f">178 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dfaview.states<font color="#cae682"><b>[</b></font>&nbsp;dfaview.dfa.addState(&nbsp;newState )&nbsp;<font color="#cae682"><b>]</b></font>.position = <font color="#8ac6f2">new</font>&nbsp;Vector(<br>
<span style="background-color: #000000"><font color="#857b6f">179 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.clientX - <font color="#cae682"><b>this</b></font>.offset.x,<br>
<span style="background-color: #000000"><font color="#857b6f">180 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.clientY - <font color="#cae682"><b>this</b></font>.offset.y<br>
<span style="background-color: #000000"><font color="#857b6f">181 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br>
<span style="background-color: #000000"><font color="#857b6f">182 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font>&nbsp;);<br>
<span style="background-color: #000000"><font color="#857b6f">183 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2"><b>document</b></font>.onkeydown = <font color="#cae682"><b>function</b></font>(&nbsp;e )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">184 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">switch</font>&nbsp;(&nbsp;e.keyCode )&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">185 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">case</font>&nbsp;46: <font color="#99968b"><i>// delete</i></font><br>
<span style="background-color: #000000"><font color="#857b6f">186 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">if</font>&nbsp;(&nbsp;<font color="#8ac6f2"><b>self</b></font>.selectedElement == <font color="#e5786d"><b>false</b></font>&nbsp;)&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">187 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">return</font>;<br>
<span style="background-color: #000000"><font color="#857b6f">188 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">189 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">switch</font>&nbsp;(&nbsp;<font color="#8ac6f2"><b>self</b></font>.selectedElement<font color="#cae682"><b>[</b></font>&nbsp;0&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;)&nbsp;<font color="#cae682"><b>{</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">190 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">case</font>&nbsp;<font color="#95e454"><i>'state'</i></font>:<br>
<span style="background-color: #000000"><font color="#857b6f">191 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dfa.deleteState(&nbsp;<font color="#8ac6f2"><b>self</b></font>.selectedElement<font color="#cae682"><b>[</b></font>&nbsp;1&nbsp;<font color="#cae682"><b>]</b></font>&nbsp;);<br>
<span style="background-color: #000000"><font color="#857b6f">192 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">break</font>;<br>
<span style="background-color: #000000"><font color="#857b6f">193 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">case</font>&nbsp;<font color="#95e454"><i>'transition'</i></font>:<br>
<span style="background-color: #000000"><font color="#857b6f">194 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#99968b"><i>// </i></font><span style="background-color: #ffff00"><font color="#8f8f8f"><i>TODO</i></font></span><br>
<span style="background-color: #000000"><font color="#857b6f">195 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">break</font>;<br>
<span style="background-color: #000000"><font color="#857b6f">196 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">197 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8ac6f2">break</font>;<br>
<span style="background-color: #000000"><font color="#857b6f">198 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">199 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font>;<br>
<span style="background-color: #000000"><font color="#857b6f">200 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>this</b></font>.mainLoop();<br>
<span style="background-color: #000000"><font color="#857b6f">201 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#cae682"><b>}</b></font><br>
<span style="background-color: #000000"><font color="#857b6f">202 </font></span><font color="#cae682"><b>}</b></font>;<br>
</font></body>
</html>
